2025-11-04 16:45:13 - phase2_ml - INFO - ================================================================================
2025-11-04 16:45:13 - phase2_ml - INFO - FASE 2: BACKTESTING CON MACHINE LEARNING v1
2025-11-04 16:45:13 - phase2_ml - INFO - ESTRATEGIA: RandomForest con Features Técnicos
2025-11-04 16:45:13 - phase2_ml - INFO - ================================================================================
2025-11-04 16:45:13 - phase2_ml - INFO - 
1. Conectando a Binance...
2025-11-04 16:45:13 - phase2_ml - INFO -    ✓ Cliente creado
2025-11-04 16:45:13 - phase2_ml - INFO - 
2. Descargando datos...
2025-11-04 16:45:13 - phase2_ml - INFO -    ACTIVO: ETHUSDT
2025-11-04 16:45:13 - phase2_ml - INFO -    TIMEFRAME: 15m
2025-11-04 16:45:13 - phase2_ml - INFO -    PERÍODO: 1 year ago UTC
2025-11-04 16:45:39 - phase2_ml - INFO -    ✓ Descargados 35040 registros
2025-11-04 16:45:39 - phase2_ml - INFO - 
3. Calculando indicadores técnicos...
2025-11-04 16:45:39 - phase2_ml - INFO -    ✓ Indicadores calculados
2025-11-04 16:45:39 - phase2_ml - INFO -    Total de columnas: 25
2025-11-04 16:45:39 - phase2_ml - INFO - 
4. Preparando dataset ML...
2025-11-04 16:45:39 - phase2_ml - INFO -    ✓ Dataset preparado
2025-11-04 16:45:39 - phase2_ml - INFO -    Features: 8
2025-11-04 16:45:39 - phase2_ml - INFO -    Muestras: 35039
2025-11-04 16:45:39 - phase2_ml - INFO - 
   TARGET DISTRIBUTION:
2025-11-04 16:45:39 - phase2_ml - INFO -    - Total: 35039
2025-11-04 16:45:39 - phase2_ml - INFO -    - Positivos (Buy): 10139 (28.9%)
2025-11-04 16:45:39 - phase2_ml - INFO -    - Negativos (No Buy): 24900 (71.1%)
2025-11-04 16:45:39 - phase2_ml - INFO -    - Balance Ratio: 0.41
2025-11-04 16:45:39 - phase2_ml - INFO - 
5. Split Train/Test...
2025-11-04 16:45:39 - phase2_ml - INFO -    Train: 28031 muestras (80.0%)
2025-11-04 16:45:39 - phase2_ml - INFO -    Test: 7008 muestras (20.0%)
2025-11-04 16:45:39 - phase2_ml - INFO - 
   TRAIN SET:
2025-11-04 16:45:39 - phase2_ml - INFO -    - Positivos: 8593 (30.7%)
2025-11-04 16:45:39 - phase2_ml - INFO -    - Negativos: 19438 (69.3%)
2025-11-04 16:45:39 - phase2_ml - INFO - 
   TEST SET:
2025-11-04 16:45:39 - phase2_ml - INFO -    - Positivos: 1546 (22.1%)
2025-11-04 16:45:39 - phase2_ml - INFO -    - Negativos: 5462 (77.9%)
2025-11-04 16:45:39 - phase2_ml - INFO - 
6. Entrenando RandomForestClassifier...
2025-11-04 16:45:40 - phase2_ml - INFO -    ✓ Modelo entrenado
2025-11-04 16:45:40 - phase2_ml - INFO -    Parámetros: {'n_estimators': 100, 'max_depth': 10, 'min_samples_split': 10, 'min_samples_leaf': 5, 'random_state': 42, 'n_jobs': -1, 'verbose': 0}
2025-11-04 16:45:40 - phase2_ml - INFO - 
7. Evaluando modelo...
2025-11-04 16:45:40 - phase2_ml - INFO - 
   TRAIN SET:
2025-11-04 16:45:40 - phase2_ml - INFO -    - AUC Score: 0.8137
2025-11-04 16:45:40 - phase2_ml - INFO -    - Accuracy: 0.7638
2025-11-04 16:45:40 - phase2_ml - INFO - 
   TEST SET:
2025-11-04 16:45:40 - phase2_ml - INFO -    - AUC Score: 0.6389
2025-11-04 16:45:40 - phase2_ml - INFO -    - Accuracy: 0.7788
2025-11-04 16:45:40 - phase2_ml - INFO -    - Precision: 0.4915
2025-11-04 16:45:40 - phase2_ml - INFO -    - Recall: 0.0750
2025-11-04 16:45:40 - phase2_ml - INFO - 
   CONFUSION MATRIX (Test):
2025-11-04 16:45:40 - phase2_ml - INFO -    - True Negatives: 5342
2025-11-04 16:45:40 - phase2_ml - INFO -    - False Positives: 120
2025-11-04 16:45:40 - phase2_ml - INFO -    - False Negatives: 1430
2025-11-04 16:45:40 - phase2_ml - INFO -    - True Positives: 116
2025-11-04 16:45:40 - phase2_ml - INFO - 
8. Importancia de Features:
2025-11-04 16:45:40 - phase2_ml - INFO -    atr_pct.................. 0.2507 ( 25.1%)
2025-11-04 16:45:40 - phase2_ml - INFO -    ATRr_14.................. 0.1598 ( 16.0%)
2025-11-04 16:45:40 - phase2_ml - INFO -    volume_norm.............. 0.1543 ( 15.4%)
2025-11-04 16:45:40 - phase2_ml - INFO -    EMA_200.................. 0.1526 ( 15.3%)
2025-11-04 16:45:40 - phase2_ml - INFO -    RSI_14................... 0.0782 (  7.8%)
2025-11-04 16:45:40 - phase2_ml - INFO -    MACDh_12_26_9............ 0.0777 (  7.8%)
2025-11-04 16:45:40 - phase2_ml - INFO -    close_pct_change......... 0.0653 (  6.5%)
2025-11-04 16:45:40 - phase2_ml - INFO -    STOCHk_14_3_3............ 0.0614 (  6.1%)
2025-11-04 16:45:40 - phase2_ml - INFO - 
9. Generando señales en test set...
2025-11-04 16:45:40 - phase2_ml - INFO -    ✓ Señales generadas
2025-11-04 16:45:40 - phase2_ml - INFO -    Total de señales de compra: 48 (0.68%)
2025-11-04 16:45:40 - phase2_ml - INFO -    Threshold de confianza: 0.7
2025-11-04 16:45:40 - phase2_ml - INFO - 
10. Ejecutando backtesting...
2025-11-04 16:45:41 - phase2_ml - INFO -    ✓ Backtesting completado
2025-11-04 16:45:41 - phase2_ml - INFO - 
================================================================================
2025-11-04 16:45:41 - phase2_ml - INFO - REPORTE FINAL - ITERACIÓN 14: MÓDULO ML v1
2025-11-04 16:45:41 - phase2_ml - INFO - ================================================================================
2025-11-04 16:45:41 - phase2_ml - INFO - 
DATASET:
2025-11-04 16:45:41 - phase2_ml - INFO -   Activo: ETHUSDT
2025-11-04 16:45:41 - phase2_ml - INFO -   Timeframe: 15m
2025-11-04 16:45:41 - phase2_ml - INFO -   Período: 1 year ago UTC
2025-11-04 16:45:41 - phase2_ml - INFO -   Total velas: 35,040
2025-11-04 16:45:41 - phase2_ml - INFO -   Train set: 28,031 (80.0%)
2025-11-04 16:45:41 - phase2_ml - INFO -   Test set: 7,008 (20.0%)
2025-11-04 16:45:41 - phase2_ml - INFO - 
FEATURES (5):
2025-11-04 16:45:41 - phase2_ml - INFO -   1. EMA_200 (Tendencia)
2025-11-04 16:45:41 - phase2_ml - INFO -   2. RSI_14 (Momentum)
2025-11-04 16:45:41 - phase2_ml - INFO -   3. ATRr_14 (Volatilidad)
2025-11-04 16:45:41 - phase2_ml - INFO -   4. MACDh_12_26_9 (Presión)
2025-11-04 16:45:41 - phase2_ml - INFO -   5. STOCHk_14_3_3 (Reversión)
2025-11-04 16:45:41 - phase2_ml - INFO -   + Features derivados: volume_norm, atr_pct, close_pct_change
2025-11-04 16:45:41 - phase2_ml - INFO - 
TARGET:
2025-11-04 16:45:41 - phase2_ml - INFO -   Horizonte: 10 velas (2.5h en 15m)
2025-11-04 16:45:41 - phase2_ml - INFO -   Ganancia mínima: 1.0%
2025-11-04 16:45:41 - phase2_ml - INFO - 
MODELO: RandomForestClassifier
2025-11-04 16:45:41 - phase2_ml - INFO -   Estimadores: 100
2025-11-04 16:45:41 - phase2_ml - INFO -   Max depth: 10
2025-11-04 16:45:41 - phase2_ml - INFO -   Threshold: 0.7
2025-11-04 16:45:41 - phase2_ml - INFO - 
MÉTRICAS DEL MODELO (Test Set):
2025-11-04 16:45:41 - phase2_ml - INFO -   AUC Score: 0.6389
2025-11-04 16:45:41 - phase2_ml - INFO -   Accuracy: 0.7788 (77.9%)
2025-11-04 16:45:41 - phase2_ml - INFO -   Precision: 0.4915 (49.2%)
2025-11-04 16:45:41 - phase2_ml - INFO -   Recall: 0.0750 (7.5%)
2025-11-04 16:45:41 - phase2_ml - INFO - 
TOP 3 FEATURES POR IMPORTANCIA:
2025-11-04 16:45:41 - phase2_ml - INFO -   1. atr_pct                    25.1%
2025-11-04 16:45:41 - phase2_ml - INFO -   2. ATRr_14                    16.0%
2025-11-04 16:45:41 - phase2_ml - INFO -   3. volume_norm                15.4%
2025-11-04 16:45:41 - phase2_ml - INFO - 
BACKTESTING (Test Set, últimas 7,009 velas):
2025-11-04 16:45:41 - phase2_ml - INFO -   Capital inicial: $10,000
2025-11-04 16:45:41 - phase2_ml - INFO -   Capital final: $8,444
2025-11-04 16:45:41 - phase2_ml - INFO -   Retorno neto: $-1,556
2025-11-04 16:45:41 - phase2_ml - INFO -   Retorno %: -15.56%
2025-11-04 16:45:41 - phase2_ml - INFO -   Annual return: +0.00%
2025-11-04 16:45:41 - phase2_ml - INFO - 
RISK METRICS:
2025-11-04 16:45:41 - phase2_ml - INFO -   Sharpe Ratio: -0.38
2025-11-04 16:45:41 - phase2_ml - INFO -   Sortino Ratio: -0.03
2025-11-04 16:45:41 - phase2_ml - INFO -   Calmar Ratio: 0.00
2025-11-04 16:45:41 - phase2_ml - INFO -   Max Drawdown: 15.56%
2025-11-04 16:45:41 - phase2_ml - INFO - 
TRADES:
2025-11-04 16:45:41 - phase2_ml - INFO -   Total trades: 6
2025-11-04 16:45:41 - phase2_ml - INFO -   Win rate: 0.0%
2025-11-04 16:45:41 - phase2_ml - INFO -   Profit factor: 0.00
2025-11-04 16:45:41 - phase2_ml - INFO -   Avg trade: $-259
2025-11-04 16:45:41 - phase2_ml - INFO -   Best trade: $-196
2025-11-04 16:45:41 - phase2_ml - INFO -   Worst trade: $-448
2025-11-04 16:45:41 - phase2_ml - INFO - 
BENCHMARK (Buy & Hold):
2025-11-04 16:45:41 - phase2_ml - INFO -   Return: -33.92%
2025-11-04 16:45:41 - phase2_ml - INFO -   Excess return (vs B&H): +18.36%
2025-11-04 16:45:41 - phase2_ml - INFO - 
================================================================================
2025-11-04 16:45:41 - phase2_ml - INFO - CRITERIOS DE ÉXITO DE ML
2025-11-04 16:45:41 - phase2_ml - INFO - ================================================================================
2025-11-04 16:45:41 - phase2_ml - INFO - 
AUC Score ≥ 0.60: 0.6389 ✓ APROBADO
2025-11-04 16:45:41 - phase2_ml - INFO - Profit Factor ≥ 1.0: 0.00 ✗ REPROBADO
2025-11-04 16:45:41 - phase2_ml - INFO - 
✗✗✗ MÓDULO ML REQUIERE AJUSTES - RECHAZADO ✗✗✗
2025-11-04 16:45:41 - phase2_ml - INFO - 
================================================================================
2025-11-04 16:45:41 - phase2_ml - INFO - Guardando artefactos...
2025-11-04 16:45:41 - phase2_ml - INFO - ================================================================================
2025-11-04 16:45:41 - phase2_ml - INFO - ✓ Trades log guardado en: /Users/jhonathan/BotDayTrading/results/trades_log_ml_v1_20251104_164541.csv
2025-11-04 16:45:41 - phase2_ml - INFO - ✓ Feature importance guardado en: /Users/jhonathan/BotDayTrading/results/feature_importance_ml_v1_20251104_164541.csv
2025-11-04 16:45:41 - phase2_ml - INFO - ✓ Métricas guardadas en: /Users/jhonathan/BotDayTrading/results/metrics_ml_v1_20251104_164541.json
2025-11-04 16:45:41 - phase2_ml - INFO - 
================================================================================
2025-11-04 16:45:41 - phase2_ml - INFO - EJECUCIÓN COMPLETADA
2025-11-04 16:45:41 - phase2_ml - INFO - ================================================================================
